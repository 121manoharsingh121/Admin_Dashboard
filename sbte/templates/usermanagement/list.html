{% extends "base.html" %}
{% block content %}
<!-- partial -->
<div class="main-panel">
    <div class="con-wp">
        <div class="col-lg-12 ">
            <div class="card">
                <div class="card-body">
                    <div class=" d-lg-flex  justify-content-between pb-2">
                        <div class="font-weight-semibold">All User List </div>
                        <div class="font-weight-semibold"><a href="/useradd/"<button class="btn btn-sm bg-primary">Add User</button></a></div>
                    </div>
               
       <div class="table-responsive">
        <table id="mud"  class="table table-bordered">
            <thead>
            <tr> 
            <th>Name</th>
            <th>Username</th>  
            <th>Email</th>  
            <th>User Type</th> 
            <th>Institute Id</th>
            <th>Status</th>
            <th>Staff</th> 
            <th>Admin</th>  
            <th>Actions</th>  
            </tr>
            </thead>
            <tbody> 
            {% for user in users %}                         
            <tr class="table-primary">
                <td>{{ user.first_name }} {{ user.last_name }}</td>  
                <td>{{ user.username }}</td>  
                <td>{{ user.email }}</td>
                <td>{{ user.user_type }}</td>
                <td>{{ user.institute }}</td>
                <td> 
                    {% if user.is_active %} 
                    <span class="text-info">Active</span>
                    {% else %}
                    <span class="text-danger"> InActive </span>
                    {% endif %}                      
                </td>
                
            <td>
                {% if user.is_staff %}
                <span class="text-info">Yes</span>
                {% else %}
                <span class="text-danger">No</span>
                {% endif %} 
            </td>  
            <td>
                {% if user.is_admin %}
                <span class="text-info">Yes</span>
                {% else %}
                <span class="text-danger">No</span>
                {% endif %} 
            </td>
            <td >   
            <a href="{% url 'useredit-view' user.id %}"><span class="btn btn-sm bg-success">Edit</span></a>
            <span class="btn btn-sm bg-danger" data-toggle="modal" id="{{ user.id }}" value={{user.id}} onclick="user(this.id)">Delete</span>
            </td>
            </tr>
            {% endfor %}  
            </tbody>
            </table>
       </div>
    </div>
                
</div>
</div>
        
</div>
</div>
## Delete PopUp ##
<script type="text/javascript">
    function user(obj) {
        
        console.log(obj)
        swal({
            title: "Are you sure?",
            text: "You Want to Delete this User !",
            icon: "warning",
            buttons: true,
            dangerMode: true,
          })
          .then((willDelete) => {
            if (willDelete) {
              $.ajax({

                url: "/userdelete/"+obj,
                success: function(response){
                        window.location.reload();
                    
                }
              });
            }
          });
    }
</script>
{% endblock %}
