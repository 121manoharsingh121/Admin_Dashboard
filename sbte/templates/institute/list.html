{% extends "base.html" %}
{% block content %}
<!-- partial -->
<div class="main-panel">
    <div class="con-wp">
        <div class="col-lg-12 ">
            <div class="card">
                <div class="card-body">
                    <div class=" d-lg-flex  justify-content-between pb-4">
                        <div class="font-weight-semibold">All Institute  List </div>
                        <div class="font-weight-semibold"><a href="/institute_add/"<button class="btn btn-sm bg-primary">Add Institute</button></a></div>
                    </div>              
       <div class="table-responsive">
        <table id="mud"  class="table table-bordered">
            <thead>
            <tr> 
            <th>Institute Code</th> 
            <th>Institute Name</th>  
            <th>Institute Short Name</th> 
            <th>Status</th> 
            <th>For Marks Entry</th>   
            <th>Actions</th>  
            </tr>
            </thead>
            <tbody> 
            {% for institute in institutes %}                         
            <tr class="table-primary">
                <td>{{ institute.code }}</td>  
                <td>{{ institute.name }}</td>  
                <td>{{ institute.short_name | truncatechars:30 }}</td>
                <td class="d-flex flex-row justify-content-center"> 
                    {% if institute.is_active %} 
                    <span class="text-info">Active</span>
                    {% else %}
                    <span class="text-danger"> InActive </span>
                    {% endif %}
                      
                </td> 
                <td>
                    {% if institute.is_marksentry %}
                    <span class="text-info">Yes</span>
                    {% else %}
                    <span class="text-danger">No</span>
                    {% endif %}
                </td>
            <td >   
            <a href="{% url 'instituteedit-view' institute.id %}"><span class="btn btn-sm bg-success">Edit</span></a>
            <span class="btn btn-sm bg-danger" data-toggle="modal" id="{{ institute.id }}" value={{institute.id}} onclick="institute(this.id)">Delete</span>
            </td>
            </tr>
            {% endfor %}  
            </tbody>
            </table>
       </div>
    </div>
                
</div>
</div>
        
</div>
</div>
## Delete PopUp ##
<script type="text/javascript">
    function institute(obj) {
        
        console.log(obj)
        swal({
            title: "Are you sure?",
            text: "You Want to Delete this Institute !",
            icon: "warning",
            buttons: true,
            dangerMode: true,
          })
          .then((willDelete) => {
            if (willDelete) {
              $.ajax({

                url: "/institute_delete/"+obj,
                success: function(response){
                        window.location.reload();
                    
                }
              });
            }
          });
    }
</script>
{% endblock %}
